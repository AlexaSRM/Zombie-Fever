{"version":3,"file":"runtimeDependencyVersion.js","sourceRoot":"","sources":["../../lib/runtimeDependencyVersion.ts"],"names":[],"mappings":";;;;;AAAA,oDAA4B;AAU5B,MAAa,wBAAwB;IAO1B,MAAM,CAAC,oCAAoC,CAAC,wBAAgC;QAC/E,MAAM,cAAc,GAAG,gBAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;QAC9D,IAAI,CAAC,cAAc,EAAE;YACjB,MAAM,IAAI,KAAK,CAAC,2BAA2B,wBAAwB,GAAG,CAAC,CAAC;SAC3E;QAED,IAAI,YAAY,GAAI,wBAAwB,CAAC,eAAuB,CAAC,cAAc,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;QACtG,IAAI,CAAC,YAAY,EAAE;YAEf,YAAY,GAAG,GAAG,CAAC;SACtB;QAED,OAAO,IAAI,cAAc,CAAC,KAAK,IAAI,YAAY,IAAI,CAAC;IACxD,CAAC;;AApBL,4DAqBC;AApB2B,wCAAe,GAAG;IACtC,GAAG,EAAE,CAAC;IACN,GAAG,EAAE,CAAC;IACN,GAAG,EAAE,CAAC;CACT,CAAC","sourcesContent":["import semver from 'semver';\n\n/**\n * The major version for all modules on SFB will match, however the minor versions can vary. \n * The package.json files used by the runtime environment specify a version range for sfb-f and sfb-skill.\n * Normally, we will specify a range of x.0.0 to the highest available (x.x.x). However, we can\n * envision some cases where we want to indicate minor version higher than 0.  For example, if \n * we have introduced some new functionality in version 1.5.0, we want to ensure that 1.5.0 is the \n * lowest version of sfb-f and sfb-skill.  This class implements that logic. \n */\nexport class RuntimeDependencyVersion {\n    private static readonly MinorVersionMap = {\n        '0': 0,\n        '1': 0,\n        '2': 0\n    };\n    \n    public static getDependencyRangeFromToolingVersion(toolingVersionExpression: string) {\n        const toolingVersion = semver.parse(toolingVersionExpression);\n        if (!toolingVersion) {\n            throw new Error(`Unable to parse version ${toolingVersionExpression}.`);\n        }\n\n        let minorVersion = (RuntimeDependencyVersion.MinorVersionMap as any)[toolingVersion.major.toString()];\n        if (!minorVersion) {\n            // If we go beyond the map, default to 0.\n            minorVersion = '0';\n        }\n\n        return `^${toolingVersion.major}.${minorVersion}.0`;\n    }\n}"]}