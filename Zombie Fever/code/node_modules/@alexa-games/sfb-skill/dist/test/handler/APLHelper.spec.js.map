{"version":3,"file":"APLHelper.spec.js","sourceRoot":"","sources":["../../../src/test/handler/APLHelper.spec.ts"],"names":[],"mappings":";;;;;;;;;AAAA,2CAA6B;AAC7B,mCAA0C;AAE1C,yDAAsD;AACtD,uDAAoD;AAGpD,MAAM,WAAW,GAAG,gCAAgC,CAAC;AAErD,MAAM,WAAW,GAAS,EAAC,iBAAiB,EACxC;QACA,SAAS,EAAE,KAAK;QAChB,SAAS,EAAE,KAAK;QAChB,SAAS,EAAE;YACP,aAAa,EAAE;gBACX,gBAAgB,EAAE,MAAM;aAC3B;YACD,SAAS,EAAE,EAAE;YACb,QAAQ,EAAE;gBACN,aAAa,EAAE;oBACX,eAAe,EAAE,KAAK;iBACzB;gBACD,MAAM,EAAE;oBACJ,QAAQ,EAAE,KAAK;iBAClB;gBACD,QAAQ,EAAE;oBACN,UAAU,EAAE,KAAK;oBACjB,qBAAqB,EAAE;wBACnB,aAAa,EAAE,EAAE;wBACjB,SAAS,EAAE;4BACP,iBAAiB,EAAE,KAAK;4BACxB,eAAe,EAAE,KAAK;yBACzB;wBACD,wBAAwB,EAAE;4BACtB,SAAS,EAAE;gCACP,YAAY,EAAE,KAAK;6BACtB;yBACJ;qBACJ;iBACJ;gBACD,aAAa,EAAE,6BAA6B;gBAC5C,gBAAgB,EAAE,KAAK;aAC1B;YACD,UAAU,EAAE;gBACR,aAAa,EAAE;oBACX;wBACI,gBAAgB,EAAE,GAAG;wBACrB,iBAAiB,EAAE,GAAG;wBACtB,WAAW,EAAE,KAAK;wBAClB,WAAW,EAAE,KAAK;qBACrB;iBACJ;gBACD,OAAO,EAAE,WAAW;gBACpB,YAAY,EAAE,IAAI;gBAClB,aAAa,EAAE,GAAG;gBAClB,KAAK,EAAE,GAAG;gBACV,mBAAmB,EAAE,IAAI;gBACzB,oBAAoB,EAAE,GAAG;gBACzB,OAAO,EAAE;oBACL,QAAQ;iBACX;gBACD,UAAU,EAAE,EAAE;aACjB;SACJ;QACD,SAAS,EAAE;YACP,MAAM,EAAE,EAAE;YACV,WAAW,EAAE,KAAK;YAClB,WAAW,EAAE,KAAK;YAClB,QAAQ,EAAE,KAAK;YACf,4BAA4B,EAAE,KAAK;SACtC;KACF;CACF,CAAC;AAEF,QAAQ,CAAC,0BAA0B,EAAE,GAAG,EAAE;IAEtC,EAAE,CAAC,gBAAgB,EAAE,KAAK,IAAI,EAAE;QAE5B,MAAM,MAAM,GAAG,MAAM,+BAAc,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,iBAAiB,CAAC,CAAC;QAEjG,MAAM,SAAS,GAAG,IAAI,qBAAS,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAEjD,eAAM,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,uBAAuB,EAAE,KAAK,IAAI,EAAE;QAEnC,MAAM,MAAM,GAAG,MAAM,+BAAc,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,iBAAiB,CAAC,CAAC;QAEjG,MAAM,SAAS,GAAG,IAAI,qBAAS,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAEjD,MAAM,YAAY,GAAG,WAA2B,CAAC;QAEjD,MAAM,eAAe,GAAG,SAAS,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;QAEhE,eAAM,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;AAEP,CAAC,CAAC,CAAC","sourcesContent":["import * as path from 'path';\nimport { strict as assert } from 'assert';\n\nimport { ConfigAccessor } from '../../configAccessor';\nimport { APLHelper } from '../../handler/APLHelper';\nimport { HandlerInput } from 'ask-sdk';\n\nconst CONFIG_FILE = \"./src/test/data/abcConfig.json\";\n\nconst testRequest : any = {\"requestEnvelope\": \n    {\n    \"version\": \"123\",\n    \"session\": \"123\",\n    \"context\": {\n        \"AudioPlayer\": {\n            \"playerActivity\": \"IDLE\"\n        },\n        \"Display\": {},\n        \"System\": {\n            \"application\": {\n                \"applicationId\": \"123\",\n            },\n            \"user\": {\n                \"userId\": \"123\",\n            },\n            \"device\": {\n                \"deviceId\": \"123\",\n                \"supportedInterfaces\": {\n                    \"AudioPlayer\": {},\n                    \"Display\": {\n                        \"templateVersion\": \"1.0\",\n                        \"markupVersion\": \"1.0\"\n                    },\n                    \"Alexa.Presentation.APL\": {\n                        \"runtime\": {\n                            \"maxVersion\": \"1.0\"\n                        }\n                    }\n                }\n            },\n            \"apiEndpoint\": \"https://api.amazonalexa.com\",\n            \"apiAccessToken\": \"123\",\n        },\n        \"Viewport\": {\n            \"experiences\": [\n                {\n                    \"arcMinuteWidth\": 246,\n                    \"arcMinuteHeight\": 144,\n                    \"canRotate\": false,\n                    \"canResize\": false\n                }\n            ],\n            \"shape\": \"RECTANGLE\",\n            \"pixelWidth\": 1024,\n            \"pixelHeight\": 600,\n            \"dpi\": 160,\n            \"currentPixelWidth\": 1024,\n            \"currentPixelHeight\": 600,\n            \"touch\": [\n                \"SINGLE\"\n            ],\n            \"keyboard\": []\n        }\n    },\n    \"request\": {\n        \"type\": \"\",\n        \"requestId\": \"123\",\n        \"timestamp\": \"123\",\n        \"locale\": \"123\",\n        \"shouldLinkResultBeReturned\": false\n    }\n  }\n};\n\ndescribe('Alexa APL Extension Test', () => {\n\n    it('Initialization', async () => {\n\n        const config = await ConfigAccessor.loadConfigFile(path.resolve(CONFIG_FILE), \"./src/test/data\");\n\n        const aplHelper = new APLHelper('en-us', config);\n\n        assert.ok(aplHelper);\n    });\n\n    it('Supports Display Test', async () => {\n\n        const config = await ConfigAccessor.loadConfigFile(path.resolve(CONFIG_FILE), \"./src/test/data\");\n\n        const aplHelper = new APLHelper('en-us', config);\n\n        const handlerInput = testRequest as HandlerInput;\n\n        const supportsDisplay = aplHelper.supportsDisplay(handlerInput);\n\n        assert.ok(supportsDisplay);\n    });\n\n});\n"]}